%%
%% This is file `traffic-light-protocol.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% traffic-light-protocol.dtx  (with options: `package')
%% 
%% IMPORTANT NOTICE:
%% 
%% For the copyright see the source file.
%% 
%% Any modified versions of this file must be renamed
%% with new filenames distinct from traffic-light-protocol.sty.
%% 
%% For distribution of the original source see the terms
%% for copying and modification in the file traffic-light-protocol.dtx.
%% 
%% This generated file may be distributed as long as the
%% original source files, as listed above, are part of the
%% same distribution. (The sources need not necessarily be
%% in the same archive or directory.)
\NeedsTeXFormat{LaTeX2e}[2003/12/01]
\ProvidesPackage{traffic-light-protocol}[2025/04/08 v0.2]
\RequirePackage{expl3}
\RequirePackage{l3keys2e}
\RequirePackage{xcolor}
\ExplSyntaxOn
\str_new:N\tlp_font_color
\str_new:N\tlp_name
\str_new:N\tlp_bg_color
\str_set:Nn\tlp_bg_color{tlp-bg-black}
\str_new:N\color_mode
\str_set:Nn\color_mode{rgb}
\keys_define:nn { tlp }{
    color-mode .choice:,
    color-mode/rgb .code:n = \str_set:N\color_mode{rgb},
    color-mode/cmyk .code:n = \str_set:N\color_mode{cmyk},

    level .choice:,
    level / red .code:n =
        \str_set:Nn\tlp_font_color{tlp-font-red}
        \str_set:Nn\tlp_name{RED},
    level / amber .code:n =
        \str_set:Nn\tlp_font_color{tlp-font-amber}
        \str_set:Nn\tlp_name{AMBER},
    level / amber+strict .code:n =
        \str_set:Nn\tlp_font_color{tlp-font-amber}
        \str_set:Nn\tlp_name{AMBER+STRICT},
    level / green .code:n =
        \str_set:Nn\tlp_font_color{tlp-font-green}
        \str_set:Nn\tlp_name{GREEN},
    level / clear .code:n =
        \str_set:Nn\tlp_font_color{tlp-font-clear}
        \str_set:Nn\tlp_name{CLEAR},
}
\ProcessKeysPackageOptions{tlp/color-mode}
\ExplSyntaxOff
\ExplSyntaxOn
\msg_new:nnn{traffic-light-protocol}{illegal_color_mode}
    {Illegal\ color\ mode:\ #1\ (only\ 'rgb'\ and\ 'cmyk'\ are\ supported)}
\cs_new_protected_nopar:Npn\tlp_set_rgb_colornames:{
    \definecolor{tlp-bg-black}{RGB}{0,0,0}
    \definecolor{tlp-font-red}{RGB}{255,43,43}
    \definecolor{tlp-font-amber}{RGB}{255,192,0}
    \definecolor{tlp-font-green}{RGB}{51,255,0}
    \definecolor{tlp-font-clear}{RGB}{255,255,255}
}
\cs_new_protected_nopar:Npn\tlp_set_cmyk_colornames:{
    \definecolor{tlp-bg-black}{CMYK}{0,0,0,255}
    \definecolor{tlp-font-red}{CMYK}{0,83,83,0}
    \definecolor{tlp-font-amber}{CMYK}{0,25,100,0}
    \definecolor{tlp-font-green}{CMYK}{79,0,100,0}
    \definecolor{tlp-font-clear}{CMYK}{0,0,0,0}
}
\str_case:NnF\color_mode
{
    {rgb} {\tlp_set_rgb_colornames:}
    {cmyk} {\tlp_set_cmyk_colornames:}
} {\msg_err:nnV{traffic-light-protocol}{illegal_color_mode}{\color_mode}}
\ExplSyntaxOff
\ExplSyntaxOn
\NewDocumentCommand{\tlp}{m}{
    \keys_set:nn{tlp/level}{#1}
    \colorbox{\str_use:N\tlp_bg_color}
        {\textcolor{\str_use:N\tlp_font_color}{
            \textsf{\textbf{TLP:\str_use:N\tlp_name}}}}
}
\ExplSyntaxOff
\endinput
%%
%% End of file `traffic-light-protocol.sty'.
